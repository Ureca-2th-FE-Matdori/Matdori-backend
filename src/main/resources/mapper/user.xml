<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.uplus.matdori.category.model.dao.UserDAO">

    <!-- 특정 회원 정보 조회 -->
    <select id="getUserById" parameterType="java.lang.String" resultType="com.uplus.matdori.category.model.dto.UserDTO">
        SELECT * FROM 회원정보 WHERE user_id = #{userId}
    </select>

    <!-- 회원 등록 -->
    <insert id="insertUser" parameterType="com.uplus.matdori.category.model.dto.UserDTO">
        INSERT INTO 회원정보 (
        user_id, point, password,
        c_1, c_2, c_3, c_4, c_5, c_6, c_7, c_8, c_9, c_10,
        c_11, c_12, c_13, c_14, c_15
        ) VALUES (
        #{userId}, #{point}, #{password},
        <foreach collection="categoryVisits" item="visit" separator=",">
            #{visit}
        </foreach>
        )
    </insert>

    <!-- 회원정보 업데이트 (포인트 및 방문 횟수) -->
    <update id="updateUser" parameterType="com.uplus.matdori.category.model.dto.UserDTO">
        UPDATE 회원정보
        SET point = #{point}, password = #{password},
        <trim prefixOverrides=",">
            <foreach collection="categoryVisits" item="visit" index="index">
                c_${index + 1} = #{visit},
            </foreach>
        </trim>
        WHERE user_id = #{userId}
    </update>

</mapper>
